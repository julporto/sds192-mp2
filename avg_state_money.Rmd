---
title: "avg_state_money"
author:"Julia Portocarrero & Dasom An"
output: html_document
---

This document will try to answer the possible question: how much avg $ is contributed by state? (What state contributes the most $ per population?)

```{r}
library(tidyverse)
library(dplyr)
```

```{r}
#contributions_tbl <- load("contributions.rda")
#save(tdf, file = "")
#contributions <- read_csv("contributions.rda")
load("contributions.rda")
```


```{r}
state_contrib <- contributions %>%
  select(transaction_amt, state) %>%
  group_by(state) %>%
  #mutate(avg_donation = mean(transaction_amt)) %>%
  summarize(avg_donation = mean(transaction_amt))

```

Load census data (made from https://www.census.gov/data/datasets/2017/demo/popest/state-total.html data): 

```{r}
census_data <- read.csv("census_Data.csv") %>%
  select(state, X2017)
#census_data$place <- sub("\\.", "", census_data$place) #clean data names
#rename(census_data, "place" = "place", "X2010" = "2010", "X2011" = "2011", "X2012" = "2012", "X2012" = "2013", "X2014" = "2014", "X2015" = "2015", "X2016" = "2016", "X2017" = "2017")
```

Join together the data
```{r}
state_contrib_census <- left_join(state_contrib, census_data, by = "state") #%>%
  #mutate(donation_per_person = str(avg_donation)/str(X2017))
test_data <- state_contrib_census %>%
  head(10)
state_contrib_census %>%
  arrange(desc(X2017))
```

```{r}
ggplot(state_contrib_census, aes(y = avg_donation, x = X2017)) +
  geom_point() +
  #theme_light() +
  scale_x_discrete(breaks = c("0", "1", "1000000", "4000000"))
```

